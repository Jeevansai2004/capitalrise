(self.webpackChunkcapital_rise_client=self.webpackChunkcapital_rise_client||[]).push([[471],{99:(e,t,a)=>{"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var n=l(a(43)),r=l(a(270)),o=["text","onCopy","options","children"];function l(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach(function(t){f(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function m(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=h(e);if(t){var r=h(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,a)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(i,e);var t,a,s,l=x(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return f(p(e=l.call.apply(l,[this].concat(a))),"onClick",function(t){var a=e.props,s=a.text,o=a.onCopy,l=a.children,i=a.options,c=n.default.Children.only(l),d=(0,r.default)(s,i);o&&o(s,d),c&&c.props&&"function"===typeof c.props.onClick&&c.props.onClick(t)}),e}return t=i,(a=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),a=d(e,o),s=n.default.Children.only(t);return n.default.cloneElement(s,c(c({},a),{},{onClick:this.onClick}))}}])&&m(t.prototype,a),s&&m(t,s),Object.defineProperty(t,"prototype",{writable:!1}),i}(n.default.PureComponent);t.CopyToClipboard=b,f(b,"defaultProps",{onCopy:void 0,options:void 0})},139:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],s=0;s<e.rangeCount;s++)a.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},145:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});a(43);var s=a(579);function n(e){let{children:t,type:a="button",variant:n="primary",loading:r=!1,className:o="",size:l="md",...i}=e;return(0,s.jsxs)("button",{type:a,className:`btn btn-${n} ${{sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[l]} ${o}`,disabled:r||i.disabled,...i,children:[r?(0,s.jsx)("span",{className:"animate-spin mr-2",children:"\u23f3"}):null,t]})}},197:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});a(43);var s=a(579);function n(e){let{label:t,error:a,className:n="",name:r,...o}=e;return(0,s.jsxs)("div",{className:`mb-4 ${n}`,children:[t&&(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:t}),(0,s.jsx)("input",{name:r,...o,className:"input "+(a?"border-danger-500":"")}),a&&(0,s.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:a})]})}},270:(e,t,a)=>{"use strict";var s=a(139),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,r,o,l,i,c,d=!1;t||(t={}),a=t.debug||!1;try{if(o=s(),l=document.createRange(),i=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",function(s){if(s.stopPropagation(),t.format)if(s.preventDefault(),"undefined"===typeof s.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=n[t.format]||n.default;window.clipboardData.setData(r,e)}else s.clipboardData.clearData(),s.clipboardData.setData(t.format,e);t.onCopy&&(s.preventDefault(),t.onCopy(s.clipboardData))}),document.body.appendChild(c),l.selectNodeContents(c),i.addRange(l),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(m){a&&console.error("unable to copy using execCommand: ",m),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(m){a&&console.error("unable to copy using clipboardData: ",m),a&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(l):i.removeAllRanges()),c&&document.body.removeChild(c),o()}return d}},471:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(43),n=a(999),r=a(145),o=a(579);function l(e){let{loot:t,onInvest:a,disabled:s}=e;const n=!t.is_active;return(0,o.jsxs)("div",{className:"card mb-4",children:[(0,o.jsxs)("div",{className:"card-header flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-semibold",children:t.title}),(0,o.jsxs)("p",{className:"text-sm text-gray-500",children:["Max: \u20b9",t.max_amount]})]}),(0,o.jsx)("span",{className:"badge "+(t.is_active?"badge-success":"badge-danger"),children:t.is_active?"Active":"Inactive"})]}),(0,o.jsxs)("div",{className:"card-body",children:[(0,o.jsx)("p",{className:"mb-2 text-gray-700",children:t.description}),(0,o.jsx)(r.A,{onClick:()=>a(t),disabled:n,variant:n?"secondary":"primary",className:"mt-2",children:"Do the Offer"})]})]})}function i(e){let{balance:t,totalEarned:a,onWithdraw:s}=e;return(0,o.jsxs)("div",{className:"card mb-4",children:[(0,o.jsx)("div",{className:"card-header flex items-center justify-between",children:(0,o.jsx)("h2",{className:"text-lg font-semibold",children:"Balance"})}),(0,o.jsxs)("div",{className:"card-body flex flex-col gap-2",children:[(0,o.jsxs)("div",{className:"text-2xl font-bold text-success-700",children:["\u20b9",(null===t||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,o.jsxs)("div",{className:"text-sm text-gray-500",children:["Total Earned: \u20b9",(null===a||void 0===a?void 0:a.toFixed(2))||"0.00"]}),s&&(0,o.jsx)(r.A,{onClick:s,variant:"success",className:"mt-2",children:"Withdraw"})]})]})}var c=a(476),d=a(768);function m(e){let{referralUrl:t,lootTitle:a,investmentAmount:s}=e;return(0,o.jsxs)("div",{className:"card mb-4",children:[(0,o.jsx)("div",{className:"card-header",children:(0,o.jsx)("h2",{className:"text-lg font-semibold",children:"Referral Link"})}),(0,o.jsxs)("div",{className:"card-body flex flex-col gap-2",children:[(0,o.jsx)("div",{className:"text-sm text-gray-700",children:a}),s&&(0,o.jsxs)("div",{className:"text-xs text-gray-500",children:["Investment Amount: ",s]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("input",{className:"input flex-1",value:t,readOnly:!0,onFocus:e=>e.target.select()}),(0,o.jsx)(c.CopyToClipboard,{text:t,onCopy:()=>d.Ay.success("Copied!"),children:(0,o.jsx)("button",{className:"btn btn-primary",children:"Copy"})})]})]})]})}var u=a(197),x=a(729),p=a(104),h=a(348),f=a.n(h);const b=(0,p.Ay)("http://localhost:5000",{autoConnect:!1});function y(){const{user:e,token:t}=(0,x.A)(),[a,n]=(0,s.useState)([]),[l,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(e&&c)return b.connect(),b.emit("join-client",e.id),u(),b.on("new-message",e=>{n(t=>[...t,e])}),()=>{b.off("new-message"),b.disconnect()}},[e,c]),(0,s.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[a]);const u=async()=>{const e=await fetch("/api/chat/messages",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),a=await e.json();a.success&&n(a.data)};return c?(0,o.jsxs)("div",{style:{position:"fixed",bottom:32,right:32,width:350,maxWidth:"90vw",height:420,background:"white",borderRadius:16,boxShadow:"0 2px 16px rgba(0,0,0,0.18)",display:"flex",flexDirection:"column",zIndex:1001},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:12,borderBottom:"1px solid #eee",background:"#2563eb",color:"white",borderTopLeftRadius:16,borderTopRightRadius:16},children:[(0,o.jsx)("span",{style:{flex:1,fontWeight:600},children:"Chat with Admin"}),(0,o.jsx)("button",{onClick:()=>d(!1),style:{background:"none",border:"none",color:"white",fontSize:20,cursor:"pointer",marginLeft:8},"aria-label":"Close chat",children:"\xd7"})]}),(0,o.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:12,background:"#f8fafc"},children:[a.map((e,t)=>(0,o.jsxs)("div",{style:{marginBottom:8},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:4},children:[(0,o.jsxs)("b",{children:[e.sender_name,":"]}),(0,o.jsx)("small",{style:{color:"#666",fontSize:"11px"},children:e.formattedTime||(e.created_at?f()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A"):"")})]}),(0,o.jsx)("div",{children:e.message})]},t)),(0,o.jsx)("div",{ref:m})]}),(0,o.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),l.trim()&&(await fetch("/api/chat/messages",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({message:l})}),b.emit("send-message",{message:l,sender_id:e.id,sender_name:e.username,sender_role:e.role,created_at:(new Date).toISOString()}),i(""))},style:{display:"flex",padding:12,borderTop:"1px solid #eee",background:"#f1f5f9",borderBottomLeftRadius:16,borderBottomRightRadius:16},children:[(0,o.jsx)("input",{value:l,onChange:e=>i(e.target.value),style:{flex:1,borderRadius:8,border:"1px solid #ddd",padding:8,marginRight:8},placeholder:"Type your message..."}),(0,o.jsx)(r.A,{type:"submit",children:"Send"})]})]}):(0,o.jsx)("button",{onClick:()=>d(!0),style:{position:"fixed",bottom:32,right:32,width:64,height:64,borderRadius:12,background:"#2563eb",color:"white",border:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:1001,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,fontWeight:600,cursor:"pointer",letterSpacing:1},"aria-label":"Open chat",children:"Chat"})}function g(){const[e,t]=(0,s.useState)([]),[a,c]=(0,s.useState)({balance:0,total_earned:0}),[x,p]=(0,s.useState)([]),[h,b]=(0,s.useState)([]),[g,j]=(0,s.useState)([]),[v,N]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1),[S,k]=(0,s.useState)(null),[A,O]=(0,s.useState)(""),[_,D]=(0,s.useState)(""),[I,T]=(0,s.useState)(""),[R,P]=(0,s.useState)(""),[E,z]=(0,s.useState)(""),[$,B]=(0,s.useState)(!1),[Y,W]=(0,s.useState)("dashboard");(0,s.useEffect)(()=>{U(),F(),L(),M(),H()},[]);const U=async()=>{const e=localStorage.getItem("token"),a=await fetch("/api/client/loots",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),s=await a.json();s.success?(console.log("Loots fetched:",s.data),t(s.data)):console.error("Failed to fetch loots:",s.message)},F=async()=>{const e=localStorage.getItem("token"),t=await fetch("/api/client/balance",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),a=await t.json();a.success&&c(a.data)},L=async()=>{const e=localStorage.getItem("token"),t=await fetch("/api/client/investments",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),a=await t.json();a.success?(console.log("Investments fetched:",a.data),p(a.data)):console.error("Failed to fetch investments:",a.message)},M=async()=>{const e=localStorage.getItem("token"),t=await fetch("/api/client/referrals",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),a=await t.json();a.success&&b(a.data)},H=async()=>{const e=localStorage.getItem("token"),t=await fetch("/api/client/withdrawals",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),a=await t.json();a.success&&j(a.data)},q=e=>{console.log("Investing in loot:",e),k(e),O(""),D(""),N(!0)},J=()=>{T(""),P(""),z(""),C(!0)};return(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,o.jsx)(n.A,{}),(0,o.jsxs)("div",{className:"max-w-3xl mx-auto py-8 px-2",children:[(0,o.jsx)("div",{className:"flex gap-2 mb-6 border-b",children:[{key:"dashboard",label:"Dashboard"},{key:"withdrawals",label:"Withdrawal History"},{key:"referrals",label:"Referral History"}].map(e=>(0,o.jsx)("button",{className:"px-4 py-2 font-medium border-b-2 transition-colors duration-150 "+(Y===e.key?"border-primary-600 text-primary-700":"border-transparent text-gray-500 hover:text-primary-600"),onClick:()=>W(e.key),children:e.label},e.key))}),"dashboard"===Y&&(0,o.jsxs)("div",{children:[(0,o.jsx)(i,{balance:a.balance,totalEarned:a.total_earned}),(0,o.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Available Loots"}),0===e.length&&(0,o.jsx)("div",{className:"text-gray-500 mb-4",children:"No loots available."}),e.map(e=>(0,o.jsx)(l,{loot:e,onInvest:q,disabled:!1},e.id)),(0,o.jsx)("h2",{className:"text-xl font-bold mt-8 mb-2",children:"Your Referral Links"}),0===x.length&&(0,o.jsx)("div",{className:"text-gray-500 mb-4",children:"No investments yet."}),x.map(e=>(0,o.jsx)(m,{referralUrl:window.location.origin+"/referral/"+e.referral_code,lootTitle:`${e.loot_title} - Investment #${e.id}`,investmentAmount:`\u20b9${e.amount}`},e.id))]}),"withdrawals"===Y&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-xl font-bold",children:"Withdrawal History"}),(0,o.jsx)(r.A,{variant:"primary",onClick:J,children:"New Withdrawal"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"card p-4",children:[(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Total Withdrawals"}),(0,o.jsx)("div",{className:"text-2xl font-bold",children:g.length})]}),(0,o.jsxs)("div",{className:"card p-4",children:[(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Total Amount"}),(0,o.jsxs)("div",{className:"text-2xl font-bold",children:["\u20b9",g.reduce((e,t)=>e+Number(t.amount),0).toFixed(2)]})]}),(0,o.jsxs)("div",{className:"card p-4",children:[(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Pending Requests"}),(0,o.jsx)("div",{className:"text-2xl font-bold",children:g.filter(e=>"pending"===e.status).length})]})]}),0===g.length?(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"text-gray-500 mb-4",children:"No withdrawals yet."}),(0,o.jsx)(r.A,{variant:"primary",onClick:J,children:"Make Your First Withdrawal"})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full bg-white rounded shadow",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2",children:"Amount"}),(0,o.jsx)("th",{className:"px-4 py-2",children:"UPI ID"}),(0,o.jsx)("th",{className:"px-4 py-2",children:"Status"}),(0,o.jsx)("th",{className:"px-4 py-2",children:"Reference"}),(0,o.jsx)("th",{className:"px-4 py-2",children:"Notes"}),(0,o.jsx)("th",{className:"px-4 py-2",children:"Date"})]})}),(0,o.jsx)("tbody",{children:g.map(e=>(0,o.jsxs)("tr",{className:"border-t",children:[(0,o.jsxs)("td",{className:"px-4 py-2 font-medium",children:["\u20b9",e.amount]}),(0,o.jsx)("td",{className:"px-4 py-2",children:e.upi_id||"-"}),(0,o.jsx)("td",{className:"px-4 py-2",children:(0,o.jsx)("span",{className:"badge "+("approved"===e.status?"badge-success":"rejected"===e.status?"badge-danger":"badge-warning"),children:e.status})}),(0,o.jsx)("td",{className:"px-4 py-2",children:e.reference_number||"-"}),(0,o.jsx)("td",{className:"px-4 py-2",children:e.notes||"-"}),(0,o.jsx)("td",{className:"px-4 py-2",children:f()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A")})]},e.id))})]})})]}),"referrals"===Y&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Referral History"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"card p-4",children:[(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Total Referrals"}),(0,o.jsx)("div",{className:"text-2xl font-bold",children:h.length})]}),(0,o.jsxs)("div",{className:"card p-4",children:[(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Total Earned"}),(0,o.jsxs)("div",{className:"text-2xl font-bold",children:["\u20b9",h.reduce((e,t)=>e+Number(t.amount),0).toFixed(2)]})]}),(0,o.jsxs)("div",{className:"card p-4",children:[(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Completed"}),(0,o.jsx)("div",{className:"text-2xl font-bold",children:h.filter(e=>"completed"===e.status).length})]})]}),0===h.length?(0,o.jsxs)("div",{className:"text-center py-8",children:[(0,o.jsx)("div",{className:"text-gray-500 mb-4",children:"No referrals yet."}),(0,o.jsx)("div",{className:"text-sm text-gray-400",children:"Share your referral links to earn more!"})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full bg-white rounded shadow",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-4 py-2",children:"Loot"}),(0,o.jsx)("th",{className:"px-4 py-2",children:"Customer UPI"}),(0,o.jsx)("th",{className:"px-4 py-2",children:"Amount"}),(0,o.jsx)("th",{className:"px-4 py-2",children:"Status"}),(0,o.jsx)("th",{className:"px-4 py-2",children:"Date"})]})}),(0,o.jsx)("tbody",{children:h.map(e=>(0,o.jsxs)("tr",{className:"border-t",children:[(0,o.jsx)("td",{className:"px-4 py-2",children:e.loot_title}),(0,o.jsx)("td",{className:"px-4 py-2",children:e.customer_upi}),(0,o.jsxs)("td",{className:"px-4 py-2 font-medium",children:["\u20b9",e.amount]}),(0,o.jsx)("td",{className:"px-4 py-2",children:(0,o.jsx)("span",{className:"badge "+("completed"===e.status?"badge-success":"badge-warning"),children:e.status})}),(0,o.jsx)("td",{className:"px-4 py-2",children:f()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A")})]},e.id))})]})})]})]}),v&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),D(""),console.log("Submitting investment:",{loot_id:S.id,amount:A}),!A||isNaN(A)||Number(A)<=0)D("Enter a valid amount");else if(Number(A)>S.max_amount)D(`Amount cannot exceed \u20b9${S.max_amount}`);else{B(!0);try{const e=localStorage.getItem("token"),t=await fetch("/api/client/invest",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({loot_id:S.id,amount:A})}),a=await t.json();if(console.log("Investment response:",a),!a.success)throw new Error(a.message);d.Ay.success("Investment successful!"),N(!1),L(),F()}catch(t){console.error("Investment error:",t),D(t.message||"Investment failed")}finally{B(!1)}}},className:"bg-white p-6 rounded shadow w-full max-w-sm",children:[(0,o.jsxs)("h2",{className:"text-lg font-bold mb-2",children:["Invest in ",S.title]}),(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Each investment generates a unique referral link that you can share to earn more!"}),(0,o.jsx)(u.A,{label:`Amount (max: \u20b9${S.max_amount})`,type:"number",min:"1",max:S.max_amount,value:A,onChange:e=>O(e.target.value),error:_,autoFocus:!0}),(0,o.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,o.jsx)(r.A,{type:"submit",loading:$,className:"flex-1",children:"Invest & Get Referral Link"}),(0,o.jsx)(r.A,{type:"button",variant:"secondary",onClick:()=>N(!1),className:"flex-1",children:"Cancel"})]})]})}),w&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),z(""),!I||isNaN(I)||Number(I)<=0)z("Enter a valid amount");else if(Number(I)>a.balance)z("Cannot withdraw more than balance");else if(R&&""!==R.trim()){B(!0);try{const e=localStorage.getItem("token"),t=await fetch("/api/client/withdraw",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({amount:I,upi_id:R.trim()})}),a=await t.json();if(!a.success)throw new Error(a.message);d.Ay.success("Withdrawal request submitted!"),C(!1),F(),H()}catch(t){z(t.message||"Withdrawal failed")}finally{B(!1)}}else z("UPI ID is required")},className:"bg-white p-6 rounded shadow w-full max-w-sm",children:[(0,o.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Withdraw Funds"}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Amount (max: \u20b9",a.balance,")"]}),(0,o.jsx)("input",{type:"number",min:"1",max:a.balance,value:I,onChange:e=>T(e.target.value),className:"input "+(E?"border-danger-500":""),placeholder:"Enter amount",autoFocus:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"UPI ID"}),(0,o.jsx)("input",{type:"text",value:R,onChange:e=>P(e.target.value),className:"input "+(E?"border-danger-500":""),placeholder:"Enter your UPI ID"})]}),E&&(0,o.jsx)("p",{className:"text-danger-600 text-xs mb-4",children:E}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(r.A,{type:"submit",loading:$,className:"flex-1",children:"Withdraw"}),(0,o.jsx)(r.A,{type:"button",variant:"secondary",onClick:()=>C(!1),className:"flex-1",children:"Cancel"})]})]})}),(0,o.jsx)("div",{className:"mt-12",children:(0,o.jsx)(y,{})})]})}},476:(e,t,a)=>{"use strict";var s=a(99).CopyToClipboard;s.CopyToClipboard=s,e.exports=s},999:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});a(43);var s=a(729),n=a(579);function r(){const{user:e,logout:t}=(0,s.A)();return(0,n.jsxs)("nav",{className:"w-full bg-primary-600 text-white px-4 py-3 flex items-center justify-between shadow",children:[(0,n.jsx)("div",{className:"font-bold text-xl tracking-wide",children:(0,n.jsx)("a",{href:"admin"===(null===e||void 0===e?void 0:e.role)?"/admin":"/dashboard",children:"Capital Rise"})}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[e&&(0,n.jsxs)("span",{className:"font-medium",children:[e.username," (",e.role,")"]}),(0,n.jsx)("button",{onClick:t,className:"btn btn-secondary text-primary-700",children:"Logout"})]})]})}}}]);
//# sourceMappingURL=471.d84bbac2.chunk.js.map