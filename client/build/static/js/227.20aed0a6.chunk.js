"use strict";(self.webpackChunkcapital_rise_client=self.webpackChunkcapital_rise_client||[]).push([[227],{145:(e,t,s)=>{s.d(t,{A:()=>n});s(43);var a=s(579);function n(e){let{children:t,type:s="button",variant:n="primary",loading:i=!1,className:l="",size:r="md",...c}=e;return(0,a.jsxs)("button",{type:s,className:`btn btn-${n} ${{sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r]} ${l}`,disabled:i||c.disabled,...c,children:[i?(0,a.jsx)("span",{className:"animate-spin mr-2",children:"\u23f3"}):null,t]})}},197:(e,t,s)=>{s.d(t,{A:()=>n});s(43);var a=s(579);function n(e){let{label:t,error:s,className:n="",name:i,...l}=e;return(0,a.jsxs)("div",{className:`mb-4 ${n}`,children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:t}),(0,a.jsx)("input",{name:i,...l,className:"input "+(s?"border-danger-500":"")}),s&&(0,a.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:s})]})}},227:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(43),n=s(216),i=s(197),l=s(145),r=s(768),c=s(579);function d(){const{code:e}=(0,n.g)(),[t,s]=(0,a.useState)(null),[d,m]=(0,a.useState)(""),[o,u]=(0,a.useState)(""),[x,f]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{y(),g()},[e]);const y=async()=>{const t=await fetch(`/api/referral/${e}`),a=await t.json();a.success?s(a.data):u(a.message)},g=async()=>{const t=await fetch(`/api/referral/stats/${e}`),s=await t.json();s.success&&j(s.data)};return o?(0,c.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen text-danger-600",children:o}):t?(0,c.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 px-2",children:(0,c.jsxs)("div",{className:"card w-full max-w-md p-8",children:[(0,c.jsx)("h1",{className:"text-2xl font-bold mb-2 text-center",children:t.loot_title}),(0,c.jsxs)("div",{className:"text-gray-600 text-center mb-4",children:["by ",t.client_name]}),(0,c.jsxs)("div",{className:"mb-6 text-center text-primary-700 font-semibold",children:["Earn up to \u20b9",t.max_amount,"!"]}),h?(0,c.jsx)("div",{className:"text-success-700 text-center font-semibold",children:"Thank you! Redirecting..."}):(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),u(""),d.trim()){f(!0);try{const t=await fetch("/api/referral/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referral_code:e,upi_id:d})}),s=await t.json();if(!s.success)throw new Error(s.message);p(!0),r.Ay.success("UPI submitted! Redirecting..."),setTimeout(()=>{window.location.href=s.data.redirect_url},2e3)}catch(s){u(s.message||"Submission failed")}finally{f(!1)}}else u("UPI ID is required")},className:"space-y-4",children:[(0,c.jsx)(i.A,{label:"Your UPI ID",value:d,onChange:e=>m(e.target.value),error:o,autoFocus:!0}),(0,c.jsx)(l.A,{type:"submit",loading:x,className:"w-full",children:"Submit & Continue"})]}),b&&(0,c.jsxs)("div",{className:"mt-8 text-xs text-gray-500 text-center",children:[(0,c.jsxs)("div",{children:["Total Referrals: ",b.total_referrals]}),(0,c.jsxs)("div",{children:["Total Amount: \u20b9",b.total_amount]})]})]})}):(0,c.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:"Loading..."})}}}]);
//# sourceMappingURL=227.20aed0a6.chunk.js.map