"use strict";(self.webpackChunkcapital_rise_client=self.webpackChunkcapital_rise_client||[]).push([[12],{12:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var t=a(43),l=a(999),i=a(145),r=a(197),n=a(768),c=a(729),d=a(579);function o(e){let{loot:s=null,onSuccess:a,onCancel:l}=e;const{token:o}=(0,c.A)(),[m,x]=(0,t.useState)({title:(null===s||void 0===s?void 0:s.title)||"",description:(null===s||void 0===s?void 0:s.description)||"",max_amount:(null===s||void 0===s?void 0:s.max_amount)||"",redirect_url:(null===s||void 0===s?void 0:s.redirect_url)||"",is_active:!1!==(null===s||void 0===s?void 0:s.is_active)}),[h,p]=(0,t.useState)({}),[u,j]=(0,t.useState)(!1),y=e=>{const{name:s,value:a,type:t,checked:l}=e.target;x(e=>({...e,[s]:"checkbox"===t?l:a})),p(e=>({...e,[s]:""}))};return(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{const e={};return m.title.trim()||(e.title="Title is required"),m.description.trim()||(e.description="Description is required"),(!m.max_amount||isNaN(m.max_amount)||Number(m.max_amount)<=0)&&(e.max_amount="Valid amount is required"),m.redirect_url.trim()||(e.redirect_url="Redirect URL is required"),e})();if(Object.keys(t).length)p(t);else{j(!0);try{const e=s?`/api/admin/loots/${s.id}`:"/api/admin/loots",t=s?"PUT":"POST",l=await fetch(e,{method:t,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(m)}),i=await l.json();if(!i.success)throw new Error(i.message);n.Ay.success(s?"Loot updated successfully!":"Loot created successfully!"),a()}catch(l){n.Ay.error(l.message||"Operation failed")}finally{j(!1)}}},className:"space-y-4",children:[(0,d.jsx)(r.A,{label:"Title",name:"title",value:m.title,onChange:y,error:h.title,placeholder:"Enter loot title"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,d.jsx)("textarea",{name:"description",value:m.description,onChange:y,className:"input min-h-[100px] "+(h.description?"border-danger-500":""),placeholder:"Enter loot description"}),h.description&&(0,d.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:h.description})]}),(0,d.jsx)(r.A,{label:"Maximum Amount (\u20b9)",name:"max_amount",type:"number",min:"1",value:m.max_amount,onChange:y,error:h.max_amount,placeholder:"Enter maximum amount"}),(0,d.jsx)(r.A,{label:"Redirect URL",name:"redirect_url",type:"url",value:m.redirect_url,onChange:y,error:h.redirect_url,placeholder:"https://example.com"}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",name:"is_active",checked:m.is_active,onChange:y,className:"mr-2"}),(0,d.jsx)("label",{className:"text-sm",children:"Active"})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(i.A,{type:"submit",loading:u,className:"flex-1",children:s?"Update Loot":"Create Loot"}),(0,d.jsx)(i.A,{type:"button",variant:"secondary",onClick:l,className:"flex-1",children:"Cancel"})]})]})}var m=a(104),x=a(348),h=a.n(x);const p=(0,m.Ay)("http://localhost:5000",{autoConnect:!1});function u(){const[e,s]=(0,t.useState)([]),[a,l]=(0,t.useState)(null),[r,n]=(0,t.useState)([]),[c,o]=(0,t.useState)(""),m=(0,t.useRef)(null);(0,t.useEffect)(()=>(x(),p.connect(),p.emit("join-admin"),p.on("new-message",e=>{("client"===e.sender_role&&e.sender_id===(null===a||void 0===a?void 0:a.id)||"admin"===e.sender_role&&e.toUserId===(null===a||void 0===a?void 0:a.id))&&n(s=>[...s,e])}),()=>{p.off("new-message"),p.disconnect()}),[a]),(0,t.useEffect)(()=>{a&&u(a.id)},[a]),(0,t.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[r]);const x=async()=>{const e=localStorage.getItem("token"),a=await fetch("/api/chat/participants",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),t=await a.json();t.success&&s(t.data)},u=async e=>{const s=localStorage.getItem("token"),a=await fetch(`/api/chat/conversation/${e}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}),t=await a.json();t.success&&n(t.data)};return(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsxs)("div",{className:"w-64 bg-white rounded shadow p-2 h-96 overflow-y-auto",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"Clients"}),e.map(e=>(0,d.jsxs)("div",{className:"p-2 rounded cursor-pointer "+((null===a||void 0===a?void 0:a.id)===e.id?"bg-primary-100 text-primary-900":"hover:bg-gray-100"),onClick:()=>l(e),children:[(0,d.jsx)("div",{className:"font-medium",children:e.username}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:e.email})]},e.id))]}),(0,d.jsxs)("div",{className:"flex-1 bg-white rounded shadow p-2 flex flex-col h-96",children:[(0,d.jsx)("h3",{className:"font-semibold mb-2",children:"Chat"}),a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex-1 overflow-y-auto bg-gray-50 rounded border border-gray-200 p-2",children:(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[r.map((e,s)=>(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,d.jsxs)("b",{children:[e.sender_name,":"]}),(0,d.jsx)("small",{className:"text-gray-500 text-xs",children:e.formattedTime||(e.created_at?h()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A"):"")})]}),(0,d.jsx)("div",{children:e.message})]},s)),(0,d.jsx)("div",{ref:m})]})}),(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!c.trim()||!a)return;const s=localStorage.getItem("token");await fetch("/api/chat/messages",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({message:c,receiver_id:a.id})}),p.emit("send-message",{message:c,sender_id:"admin",toUserId:a.id,sender_name:"Admin",sender_role:"admin",created_at:(new Date).toISOString()}),o("")},className:"flex gap-2 mt-2",children:[(0,d.jsx)("input",{className:"input flex-1",placeholder:"Type your message...",value:c,onChange:e=>o(e.target.value)}),(0,d.jsx)(i.A,{type:"submit",variant:"primary",children:"Send"})]})]}):(0,d.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:"Select a client to chat"})]})]})}const j=[{key:"loots",label:"Loots"},{key:"clients",label:"Clients"},{key:"analytics",label:"Analytics"},{key:"withdrawals",label:"Withdrawals"},{key:"chat",label:"Chat"}];function y(){var e,s,a,r;const{token:m}=(0,c.A)(),[x,p]=(0,t.useState)("loots"),[y,N]=(0,t.useState)([]),[f,v]=(0,t.useState)([]),[b,w]=(0,t.useState)(!1),[g,A]=(0,t.useState)(null),[_,C]=(0,t.useState)(null),[k,S]=(0,t.useState)(null),[T,D]=(0,t.useState)([]),[Y,z]=(0,t.useState)(!1),[E,$]=(0,t.useState)(null);(0,t.useEffect)(()=>{"loots"===x&&L(),"clients"===x&&R(),"analytics"===x&&B(),"withdrawals"===x&&M()},[x,m]);const L=async()=>{try{const e=await fetch("/api/admin/loots",{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}}),s=await e.json();s.success&&N(s.data)}catch(e){console.error("Error fetching loots:",e)}},R=async()=>{const e=await fetch("/api/admin/clients",{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}}),s=await e.json();s.success&&v(s.data)},B=async()=>{const e=await fetch("/api/admin/analytics",{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}}),s=await e.json();s.success&&S(s.data)},M=async()=>{const e=await fetch("/api/admin/withdrawals",{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}}),s=await e.json();s.success&&D(s.data)},O=async(e,s)=>{let a="",t="";if("rejected"===s){if(a=prompt("Enter rejection reason:"),null===a)return}else if("approved"===s){if(t=prompt("Enter reference number (numbers only):"),null===t)return;if(!t||!/^\d+$/.test(t))return void n.Ay.error("Reference number is required and must contain only numbers")}try{const l=await fetch(`/api/admin/withdrawals/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({status:s,notes:a,reference_number:t})}),i=await l.json();if(!i.success)throw new Error(i.message);n.Ay.success(`Withdrawal ${s}`),M()}catch(l){n.Ay.error(l.message||"Action failed")}};return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)(l.A,{}),(0,d.jsxs)("div",{className:"max-w-5xl mx-auto py-8 px-2",children:[(0,d.jsx)("div",{className:"flex gap-2 mb-6 border-b",children:j.map(e=>(0,d.jsx)("button",{className:"px-4 py-2 font-medium border-b-2 transition-colors duration-150 "+(x===e.key?"border-primary-600 text-primary-700":"border-transparent text-gray-500 hover:text-primary-600"),onClick:()=>p(e.key),children:e.label},e.key))}),(0,d.jsxs)("div",{children:["loots"===x&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h2",{className:"text-xl font-bold",children:"Loots"}),(0,d.jsx)(i.A,{variant:"primary",onClick:()=>{$(null),z(!0)},children:"Create New Loot"})]}),0===y.length?(0,d.jsx)("div",{className:"text-gray-500",children:"No loots available."}):(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full bg-white rounded shadow",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-2",children:"Title"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Description"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Max Amount"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Status"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Created"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Actions"})]})}),(0,d.jsx)("tbody",{children:y.map(e=>(0,d.jsxs)("tr",{className:"border-t",children:[(0,d.jsx)("td",{className:"px-4 py-2",children:e.title}),(0,d.jsx)("td",{className:"px-4 py-2",children:e.description}),(0,d.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",e.max_amount]}),(0,d.jsx)("td",{className:"px-4 py-2",children:(0,d.jsx)("span",{className:"badge "+(e.is_active?"badge-success":"badge-warning"),children:e.is_active?"Active":"Inactive"})}),(0,d.jsx)("td",{className:"px-4 py-2",children:h()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A")}),(0,d.jsxs)("td",{className:"px-4 py-2 flex gap-2",children:[(0,d.jsx)(i.A,{variant:"primary",size:"sm",onClick:()=>(e=>{$(e),z(!0)})(e),children:"Edit"}),(0,d.jsx)(i.A,{variant:"danger",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this loot?"))try{const s=await fetch(`/api/admin/loots/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}}),a=await s.json();if(!a.success)throw new Error(a.message);n.Ay.success("Loot deleted successfully!"),L()}catch(s){n.Ay.error(s.message||"Delete failed")}})(e.id),children:"Delete"})]})]},e.id))})]})})]}),"clients"===x&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Clients"}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full bg-white rounded shadow",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-2",children:"Username"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Email"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Balance"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Total Earned"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Offers"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Referrals"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Actions"})]})}),(0,d.jsx)("tbody",{children:f.map(e=>(0,d.jsxs)("tr",{className:"border-t",children:[(0,d.jsx)("td",{className:"px-4 py-2",children:e.username}),(0,d.jsx)("td",{className:"px-4 py-2",children:e.email}),(0,d.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",e.balance]}),(0,d.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",e.total_earned]}),(0,d.jsx)("td",{className:"px-4 py-2",children:e.total_investments}),(0,d.jsx)("td",{className:"px-4 py-2",children:e.total_referrals}),(0,d.jsx)("td",{className:"px-4 py-2",children:(0,d.jsx)(i.A,{variant:"primary",onClick:()=>(async e=>{A(e),w(!0);const s=await fetch(`/api/admin/clients/${e.id}`,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}}),a=await s.json();a.success&&C(a.data)})(e),size:"sm",children:"View"})})]},e.id))})]})}),b&&_&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded shadow w-full max-w-2xl overflow-y-auto max-h-[90vh]",children:[(0,d.jsxs)("h2",{className:"text-lg font-bold mb-2",children:["Client: ",g.username]}),(0,d.jsxs)("div",{className:"mb-2 text-sm text-gray-600",children:["Email: ",g.email]}),(0,d.jsxs)("div",{className:"mb-2 text-sm text-gray-600",children:["Balance: \u20b9",_.client.balance]}),(0,d.jsxs)("div",{className:"mb-2 text-sm text-gray-600",children:["Total Earned: \u20b9",_.client.total_earned]}),(0,d.jsx)("button",{className:"bg-primary-600 text-white px-3 py-1 rounded mb-4",onClick:async()=>{const e=prompt("Enter amount to credit to this client:");if(!(!e||isNaN(e)||Number(e)<=0))try{const s=await fetch("/api/admin/credit",{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:g.id,amount:Number(e)})}),a=await s.json();if(!a.success)throw new Error(a.message);n.Ay.success("Balance credited!"),C(e=>({...e,client:{...e.client,balance:a.data.balance}})),R()}catch(s){n.Ay.error(s.message||"Credit failed")}},children:"Credit Balance"}),(0,d.jsx)("h3",{className:"font-semibold mt-4 mb-1",children:"Offers"}),(0,d.jsx)("div",{className:"overflow-x-auto mb-2",children:(0,d.jsxs)("table",{className:"min-w-full text-xs",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-2 py-1",children:"Loot"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Amount"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Referrals"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Referral Amount"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Date"})]})}),(0,d.jsx)("tbody",{children:_.investments.map(e=>(0,d.jsxs)("tr",{className:"border-t",children:[(0,d.jsx)("td",{className:"px-2 py-1",children:e.loot_title}),(0,d.jsxs)("td",{className:"px-2 py-1",children:["\u20b9",e.amount]}),(0,d.jsx)("td",{className:"px-2 py-1",children:e.referral_count}),(0,d.jsxs)("td",{className:"px-2 py-1",children:["\u20b9",e.referral_amount||0]}),(0,d.jsx)("td",{className:"px-2 py-1",children:h()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A")})]},e.id))})]})}),(0,d.jsx)("h3",{className:"font-semibold mt-4 mb-1",children:"Withdrawals"}),(0,d.jsx)("div",{className:"overflow-x-auto mb-2",children:(0,d.jsxs)("table",{className:"min-w-full text-xs",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-2 py-1",children:"Amount"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"UPI"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Status"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Date"})]})}),(0,d.jsx)("tbody",{children:_.withdrawals.map(e=>(0,d.jsxs)("tr",{className:"border-t",children:[(0,d.jsxs)("td",{className:"px-2 py-1",children:["\u20b9",e.amount]}),(0,d.jsx)("td",{className:"px-2 py-1",children:e.upi_id||"-"}),(0,d.jsx)("td",{className:"px-2 py-1",children:e.status}),(0,d.jsx)("td",{className:"px-2 py-1",children:h()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A")})]},e.id))})]})}),(0,d.jsx)(i.A,{className:"mt-2 w-full",variant:"secondary",onClick:()=>w(!1),children:"Close"})]})})]}),"analytics"===x&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Platform Analytics"}),k?(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[(0,d.jsxs)("div",{className:"card p-4",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Total Clients"}),(0,d.jsx)("div",{className:"text-2xl font-bold",children:k.overview.totalClients})]}),(0,d.jsxs)("div",{className:"card p-4",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Total Loots"}),(0,d.jsx)("div",{className:"text-2xl font-bold",children:k.overview.totalLoots})]}),(0,d.jsxs)("div",{className:"card p-4",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Total Offers"}),(0,d.jsx)("div",{className:"text-2xl font-bold",children:k.overview.totalInvestments})]}),(0,d.jsxs)("div",{className:"card p-4",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Total Referrals"}),(0,d.jsx)("div",{className:"text-2xl font-bold",children:k.overview.totalReferrals})]}),(0,d.jsxs)("div",{className:"card p-4",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Total Earned"}),(0,d.jsxs)("div",{className:"text-2xl font-bold",children:["\u20b9",k.overview.totalEarned]})]}),(0,d.jsxs)("div",{className:"card p-4",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Pending Withdrawals"}),(0,d.jsx)("div",{className:"text-2xl font-bold",children:k.overview.pendingWithdrawals})]})]}):(0,d.jsx)("div",{children:"Loading..."}),(0,d.jsx)("h3",{className:"font-semibold mt-6 mb-2",children:"Recent Offers"}),(0,d.jsx)("div",{className:"overflow-x-auto mb-4",children:(0,d.jsxs)("table",{className:"min-w-full text-xs bg-white rounded shadow",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-2 py-1",children:"User"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Loot"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Amount"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Date"})]})}),(0,d.jsx)("tbody",{children:null===k||void 0===k||null===(e=k.recentActivities)||void 0===e||null===(s=e.investments)||void 0===s?void 0:s.map(e=>(0,d.jsxs)("tr",{className:"border-t",children:[(0,d.jsx)("td",{className:"px-2 py-1",children:e.username}),(0,d.jsx)("td",{className:"px-2 py-1",children:e.loot_title}),(0,d.jsxs)("td",{className:"px-2 py-1",children:["\u20b9",e.amount]}),(0,d.jsx)("td",{className:"px-2 py-1",children:h()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A")})]},e.id))})]})}),(0,d.jsx)("h3",{className:"font-semibold mt-6 mb-2",children:"Recent Referrals"}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full text-xs bg-white rounded shadow",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-2 py-1",children:"User"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Loot"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Amount"}),(0,d.jsx)("th",{className:"px-2 py-1",children:"Date"})]})}),(0,d.jsx)("tbody",{children:null===k||void 0===k||null===(a=k.recentActivities)||void 0===a||null===(r=a.referrals)||void 0===r?void 0:r.map(e=>(0,d.jsxs)("tr",{className:"border-t",children:[(0,d.jsx)("td",{className:"px-2 py-1",children:e.username}),(0,d.jsx)("td",{className:"px-2 py-1",children:e.loot_title}),(0,d.jsxs)("td",{className:"px-2 py-1",children:["\u20b9",e.amount]}),(0,d.jsx)("td",{className:"px-2 py-1",children:h()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A")})]},e.id))})]})})]}),"withdrawals"===x&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Withdrawal Requests"}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full bg-white rounded shadow",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-2",children:"User"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Email"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Amount"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"UPI"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Status"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Reference"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Notes"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Date"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Actions"})]})}),(0,d.jsx)("tbody",{children:T.map(e=>(0,d.jsxs)("tr",{className:"border-t",children:[(0,d.jsx)("td",{className:"px-4 py-2",children:e.username}),(0,d.jsx)("td",{className:"px-4 py-2",children:e.email}),(0,d.jsxs)("td",{className:"px-4 py-2",children:["\u20b9",e.amount]}),(0,d.jsx)("td",{className:"px-4 py-2",children:e.upi_id||"-"}),(0,d.jsx)("td",{className:"px-4 py-2",children:e.status}),(0,d.jsx)("td",{className:"px-4 py-2",children:e.reference_number||"-"}),(0,d.jsx)("td",{className:"px-4 py-2",children:e.notes||"-"}),(0,d.jsx)("td",{className:"px-4 py-2",children:h()(e.created_at).tz("Asia/Kolkata").format("DD/MM/YYYY h:mm A")}),(0,d.jsx)("td",{className:"px-4 py-2 flex gap-2",children:"pending"===e.status&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.A,{variant:"success",size:"sm",onClick:()=>O(e.id,"approved"),children:"Approve"}),(0,d.jsx)(i.A,{variant:"danger",size:"sm",onClick:()=>O(e.id,"rejected"),children:"Reject"})]})})]},e.id))})]})})]}),"chat"===x&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Admin Chat"}),(0,d.jsx)(u,{})]})]})]}),Y&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded shadow w-full max-w-2xl overflow-y-auto max-h-[90vh]",children:[(0,d.jsx)("h2",{className:"text-lg font-bold mb-4",children:E?"Edit Loot":"Create New Loot"}),(0,d.jsx)(o,{loot:E,onSuccess:()=>{z(!1),$(null),L()},onCancel:()=>{z(!1),$(null)}})]})})]})}},145:(e,s,a)=>{a.d(s,{A:()=>l});a(43);var t=a(579);function l(e){let{children:s,type:a="button",variant:l="primary",loading:i=!1,className:r="",size:n="md",...c}=e;return(0,t.jsxs)("button",{type:a,className:`btn btn-${l} ${{sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[n]} ${r}`,disabled:i||c.disabled,...c,children:[i?(0,t.jsx)("span",{className:"animate-spin mr-2",children:"\u23f3"}):null,s]})}},197:(e,s,a)=>{a.d(s,{A:()=>l});a(43);var t=a(579);function l(e){let{label:s,error:a,className:l="",name:i,...r}=e;return(0,t.jsxs)("div",{className:`mb-4 ${l}`,children:[s&&(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:s}),(0,t.jsx)("input",{name:i,...r,className:"input "+(a?"border-danger-500":"")}),a&&(0,t.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:a})]})}},999:(e,s,a)=>{a.d(s,{A:()=>i});a(43);var t=a(729),l=a(579);function i(){const{user:e,logout:s}=(0,t.A)();return(0,l.jsxs)("nav",{className:"w-full bg-primary-600 text-white px-4 py-3 flex items-center justify-between shadow",children:[(0,l.jsx)("div",{className:"font-bold text-xl tracking-wide",children:(0,l.jsx)("a",{href:"admin"===(null===e||void 0===e?void 0:e.role)?"/admin":"/dashboard",children:"Capital Rise"})}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[e&&(0,l.jsxs)("span",{className:"font-medium",children:[e.username," (",e.role,")"]}),(0,l.jsx)("button",{onClick:s,className:"btn btn-secondary text-primary-700",children:"Logout"})]})]})}}}]);
//# sourceMappingURL=12.ada3dd3a.chunk.js.map