{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saije\\\\Downloads\\\\capital rise\\\\client\\\\src\\\\components\\\\ChatBox.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useChat } from '../context/AuthContext';\nimport io from 'socket.io-client';\nimport Button from './Button';\nimport moment from 'moment-timezone';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io('http://localhost:5000', {\n  autoConnect: false\n});\nexport default function ChatBox() {\n  _s();\n  const {\n    user,\n    token\n  } = useAuth();\n  const {\n    socket,\n    notificationCount,\n    clearNotifications\n  } = useChat();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [open, setOpen] = useState(false);\n  const messagesEndRef = useRef(null);\n  const [isAdminTyping, setIsAdminTyping] = useState(false);\n  const typingTimeout = useRef(null);\n  useEffect(() => {\n    if (!user || !socket) return;\n    if (!open) return;\n    socket.emit('join-client', user.id);\n    fetchMessages();\n    const handler = msg => {\n      if (msg.sender_role === 'admin' && msg.toUserId === user.id || msg.sender_role === 'client' && msg.sender_id === user.id) {\n        setMessages(m => [...m, msg]);\n      }\n    };\n    socket.on('new-message', handler);\n    return () => {\n      socket.off('new-message', handler);\n    };\n  }, [user, socket, open]);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  useEffect(() => {\n    if (open) clearNotifications();\n  }, [open, clearNotifications]);\n  useEffect(() => {\n    if (!user || !socket) return;\n    // Listen for admin typing events\n    const handleAdminTyping = () => {\n      setIsAdminTyping(true);\n      if (typingTimeout.current) clearTimeout(typingTimeout.current);\n      typingTimeout.current = setTimeout(() => setIsAdminTyping(false), 2000);\n    };\n    socket.on('admin-typing', handleAdminTyping);\n    return () => {\n      socket.off('admin-typing', handleAdminTyping);\n      if (typingTimeout.current) clearTimeout(typingTimeout.current);\n    };\n  }, [user, socket]);\n  const fetchMessages = async () => {\n    const res = await fetch('/api/chat/messages', {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await res.json();\n    if (data.success) setMessages(data.data);\n  };\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    const messageText = input.trim();\n    setInput('');\n\n    // Create message object for immediate display\n    const newMessage = {\n      message: messageText,\n      sender_id: user.id,\n      sender_name: user.username,\n      sender_role: user.role,\n      created_at: new Date().toISOString()\n    };\n\n    // Add message to local state immediately\n    setMessages(m => [...m, newMessage]);\n    try {\n      // Save to DB\n      await fetch('/api/chat/messages', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: messageText\n        })\n      });\n\n      // Emit for real-time\n      socket.emit('send-message', {\n        message: messageText,\n        sender_id: user.id,\n        sender_name: user.username,\n        sender_role: user.role,\n        created_at: newMessage.created_at\n      });\n    } catch (error) {\n      console.error('Failed to send message:', error);\n      // Remove the message if it failed to send\n      setMessages(m => m.filter(msg => msg !== newMessage));\n    }\n  };\n  const handleInputChange = e => {\n    setInput(e.target.value);\n    if (socket && user) {\n      socket.emit('typing', {\n        sender_role: 'client',\n        userId: user.id\n      });\n    }\n  };\n\n  // Show a small open button when chat is closed\n  if (!open) {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setOpen(true),\n      style: {\n        position: 'fixed',\n        bottom: 32,\n        right: 32,\n        width: 64,\n        height: 64,\n        borderRadius: 12,\n        background: '#2563eb',\n        color: 'white',\n        border: 'none',\n        boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n        zIndex: 1001,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontSize: 20,\n        fontWeight: 600,\n        cursor: 'pointer',\n        letterSpacing: 1\n      },\n      \"aria-label\": \"Open chat\",\n      children: [\"Chat\", notificationCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          position: 'absolute',\n          top: 8,\n          right: 8,\n          background: 'red',\n          color: 'white',\n          borderRadius: '50%',\n          width: 20,\n          height: 20,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize: 12,\n          fontWeight: 700\n        },\n        children: notificationCount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Show the chatbox when open\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      bottom: 32,\n      right: 32,\n      width: 350,\n      maxWidth: '90vw',\n      height: 420,\n      background: 'white',\n      borderRadius: 16,\n      boxShadow: '0 2px 16px rgba(0,0,0,0.18)',\n      display: 'flex',\n      flexDirection: 'column',\n      zIndex: 1001\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: 12,\n        borderBottom: '1px solid #eee',\n        background: '#2563eb',\n        color: 'white',\n        borderTopLeftRadius: 16,\n        borderTopRightRadius: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          flex: 1,\n          fontWeight: 600\n        },\n        children: \"Chat with Admin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setOpen(false),\n        style: {\n          background: 'none',\n          border: 'none',\n          color: 'white',\n          fontSize: 20,\n          cursor: 'pointer',\n          marginLeft: 8\n        },\n        \"aria-label\": \"Close chat\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        overflowY: 'auto',\n        padding: 12,\n        background: '#f8fafc'\n      },\n      children: [messages.map((msg, i) => {\n        const isClientMessage = msg.sender_role === 'client' || msg.sender_id === user.id;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 8\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: isClientMessage ? 'flex-end' : 'flex-start',\n              marginBottom: 4\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxWidth: '80%',\n                padding: '8px 12px',\n                borderRadius: 12,\n                background: isClientMessage ? '#2563eb' : '#e5e7eb',\n                color: isClientMessage ? 'white' : 'black',\n                wordWrap: 'break-word'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '12px',\n                  opacity: 0.8,\n                  marginBottom: 2\n                },\n                children: msg.sender_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: msg.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '10px',\n                  opacity: 0.7,\n                  marginTop: 4,\n                  textAlign: isClientMessage ? 'right' : 'left'\n                },\n                children: msg.created_at ? moment.utc(msg.created_at).tz('Asia/Kolkata').format('DD/MM/YYYY h:mm A') : ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      style: {\n        display: 'flex',\n        padding: 12,\n        borderTop: '1px solid #eee',\n        background: '#f1f5f9',\n        borderBottomLeftRadius: 16,\n        borderBottomRightRadius: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: input,\n        onChange: handleInputChange,\n        onBlur: () => socket && user && socket.emit('stop-typing', {\n          sender_role: 'client',\n          userId: user.id\n        }),\n        style: {\n          flex: 1,\n          borderRadius: 8,\n          border: '1px solid #ddd',\n          padding: 8,\n          marginRight: 8\n        },\n        placeholder: \"Type your message...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), isAdminTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '0 16px 8px',\n        color: '#2563eb',\n        fontSize: 13,\n        fontWeight: 500\n      },\n      children: [\"Admin is typing\", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"typing-dots\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \".\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \".\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \".\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatBox, \"VjnbOHcCTRg//eUhaQ36aNCPdco=\", false, function () {\n  return [useAuth, useChat];\n});\n_c = ChatBox;\nvar _c;\n$RefreshReg$(_c, \"ChatBox\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useAuth","useChat","io","Button","moment","jsxDEV","_jsxDEV","socket","autoConnect","ChatBox","_s","user","token","notificationCount","clearNotifications","messages","setMessages","input","setInput","open","setOpen","messagesEndRef","isAdminTyping","setIsAdminTyping","typingTimeout","emit","id","fetchMessages","handler","msg","sender_role","toUserId","sender_id","m","on","off","_messagesEndRef$curre","current","scrollIntoView","behavior","handleAdminTyping","clearTimeout","setTimeout","res","fetch","headers","data","json","success","sendMessage","e","preventDefault","trim","messageText","newMessage","message","sender_name","username","role","created_at","Date","toISOString","method","body","JSON","stringify","error","console","filter","handleInputChange","target","value","userId","onClick","style","position","bottom","right","width","height","borderRadius","background","color","border","boxShadow","zIndex","display","alignItems","justifyContent","fontSize","fontWeight","cursor","letterSpacing","children","top","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","flexDirection","padding","borderBottom","borderTopLeftRadius","borderTopRightRadius","flex","marginLeft","overflowY","map","i","isClientMessage","marginBottom","wordWrap","opacity","marginTop","textAlign","utc","tz","format","ref","onSubmit","borderTop","borderBottomLeftRadius","borderBottomRightRadius","onChange","onBlur","marginRight","placeholder","type","className","_c","$RefreshReg$"],"sources":["C:/Users/saije/Downloads/capital rise/client/src/components/ChatBox.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useChat } from '../context/AuthContext';\r\nimport io from 'socket.io-client';\r\nimport Button from './Button';\r\nimport moment from 'moment-timezone';\r\n\r\nconst socket = io('http://localhost:5000', { autoConnect: false });\r\n\r\nexport default function ChatBox() {\r\n  const { user, token } = useAuth();\r\n  const { socket, notificationCount, clearNotifications } = useChat();\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [open, setOpen] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n  const [isAdminTyping, setIsAdminTyping] = useState(false);\r\n  const typingTimeout = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!user || !socket) return;\r\n    if (!open) return;\r\n    socket.emit('join-client', user.id);\r\n    fetchMessages();\r\n    const handler = msg => {\r\n      if (\r\n        (msg.sender_role === 'admin' && msg.toUserId === user.id) ||\r\n        (msg.sender_role === 'client' && msg.sender_id === user.id)\r\n      ) {\r\n        setMessages(m => [...m, msg]);\r\n      }\r\n    };\r\n    socket.on('new-message', handler);\r\n    return () => {\r\n      socket.off('new-message', handler);\r\n    };\r\n  }, [user, socket, open]);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (open) clearNotifications();\r\n  }, [open, clearNotifications]);\r\n\r\n  useEffect(() => {\r\n    if (!user || !socket) return;\r\n    // Listen for admin typing events\r\n    const handleAdminTyping = () => {\r\n      setIsAdminTyping(true);\r\n      if (typingTimeout.current) clearTimeout(typingTimeout.current);\r\n      typingTimeout.current = setTimeout(() => setIsAdminTyping(false), 2000);\r\n    };\r\n    socket.on('admin-typing', handleAdminTyping);\r\n    return () => {\r\n      socket.off('admin-typing', handleAdminTyping);\r\n      if (typingTimeout.current) clearTimeout(typingTimeout.current);\r\n    };\r\n  }, [user, socket]);\r\n\r\n  const fetchMessages = async () => {\r\n    const res = await fetch('/api/chat/messages', {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    const data = await res.json();\r\n    if (data.success) setMessages(data.data);\r\n  };\r\n\r\n  const sendMessage = async e => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n\r\n    const messageText = input.trim();\r\n    setInput('');\r\n\r\n    // Create message object for immediate display\r\n    const newMessage = {\r\n      message: messageText,\r\n      sender_id: user.id,\r\n      sender_name: user.username,\r\n      sender_role: user.role,\r\n      created_at: new Date().toISOString(),\r\n    };\r\n\r\n    // Add message to local state immediately\r\n    setMessages(m => [...m, newMessage]);\r\n\r\n    try {\r\n      // Save to DB\r\n      await fetch('/api/chat/messages', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ message: messageText })\r\n      });\r\n\r\n      // Emit for real-time\r\n      socket.emit('send-message', {\r\n        message: messageText,\r\n        sender_id: user.id,\r\n        sender_name: user.username,\r\n        sender_role: user.role,\r\n        created_at: newMessage.created_at\r\n      });\r\n    } catch (error) {\r\n      console.error('Failed to send message:', error);\r\n      // Remove the message if it failed to send\r\n      setMessages(m => m.filter(msg => msg !== newMessage));\r\n    }\r\n  };\r\n\r\n  const handleInputChange = e => {\r\n    setInput(e.target.value);\r\n    if (socket && user) {\r\n      socket.emit('typing', { sender_role: 'client', userId: user.id });\r\n    }\r\n  };\r\n\r\n  // Show a small open button when chat is closed\r\n  if (!open) {\r\n    return (\r\n      <button\r\n        onClick={() => setOpen(true)}\r\n        style={{\r\n          position: 'fixed',\r\n          bottom: 32,\r\n          right: 32,\r\n          width: 64,\r\n          height: 64,\r\n          borderRadius: 12,\r\n          background: '#2563eb',\r\n          color: 'white',\r\n          border: 'none',\r\n          boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\r\n          zIndex: 1001,\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          fontSize: 20,\r\n          fontWeight: 600,\r\n          cursor: 'pointer',\r\n          letterSpacing: 1,\r\n        }}\r\n        aria-label=\"Open chat\"\r\n      >\r\n        Chat\r\n        {notificationCount > 0 && (\r\n          <span style={{\r\n            position: 'absolute',\r\n            top: 8,\r\n            right: 8,\r\n            background: 'red',\r\n            color: 'white',\r\n            borderRadius: '50%',\r\n            width: 20,\r\n            height: 20,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            fontSize: 12,\r\n            fontWeight: 700,\r\n          }}>{notificationCount}</span>\r\n        )}\r\n      </button>\r\n    );\r\n  }\r\n\r\n  // Show the chatbox when open\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'fixed',\r\n        bottom: 32,\r\n        right: 32,\r\n        width: 350,\r\n        maxWidth: '90vw',\r\n        height: 420,\r\n        background: 'white',\r\n        borderRadius: 16,\r\n        boxShadow: '0 2px 16px rgba(0,0,0,0.18)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        zIndex: 1001,\r\n      }}\r\n    >\r\n      <div style={{ display: 'flex', alignItems: 'center', padding: 12, borderBottom: '1px solid #eee', background: '#2563eb', color: 'white', borderTopLeftRadius: 16, borderTopRightRadius: 16 }}>\r\n        <span style={{ flex: 1, fontWeight: 600 }}>Chat with Admin</span>\r\n        <button\r\n          onClick={() => setOpen(false)}\r\n          style={{ background: 'none', border: 'none', color: 'white', fontSize: 20, cursor: 'pointer', marginLeft: 8 }}\r\n          aria-label=\"Close chat\"\r\n        >\r\n          ×\r\n        </button>\r\n      </div>\r\n      <div style={{ flex: 1, overflowY: 'auto', padding: 12, background: '#f8fafc' }}>\r\n        {messages.map((msg, i) => {\r\n          const isClientMessage = msg.sender_role === 'client' || msg.sender_id === user.id;\r\n          return (\r\n            <div key={i} style={{ marginBottom: 8 }}>\r\n              <div style={{ \r\n                display: 'flex', \r\n                justifyContent: isClientMessage ? 'flex-end' : 'flex-start',\r\n                marginBottom: 4 \r\n              }}>\r\n                <div style={{\r\n                  maxWidth: '80%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: 12,\r\n                  background: isClientMessage ? '#2563eb' : '#e5e7eb',\r\n                  color: isClientMessage ? 'white' : 'black',\r\n                  wordWrap: 'break-word'\r\n                }}>\r\n                  <div style={{ fontSize: '12px', opacity: 0.8, marginBottom: 2 }}>\r\n                    {msg.sender_name}\r\n                  </div>\r\n                  <div>{msg.message}</div>\r\n                  <div style={{ fontSize: '10px', opacity: 0.7, marginTop: 4, textAlign: isClientMessage ? 'right' : 'left' }}>\r\n                    {msg.created_at ? moment.utc(msg.created_at).tz('Asia/Kolkata').format('DD/MM/YYYY h:mm A') : ''}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n      <form onSubmit={sendMessage} style={{ display: 'flex', padding: 12, borderTop: '1px solid #eee', background: '#f1f5f9', borderBottomLeftRadius: 16, borderBottomRightRadius: 16 }}>\r\n        <input\r\n          value={input}\r\n          onChange={handleInputChange}\r\n          onBlur={() => socket && user && socket.emit('stop-typing', { sender_role: 'client', userId: user.id })}\r\n          style={{ flex: 1, borderRadius: 8, border: '1px solid #ddd', padding: 8, marginRight: 8 }}\r\n          placeholder=\"Type your message...\"\r\n        />\r\n        <Button type=\"submit\">Send</Button>\r\n      </form>\r\n      {isAdminTyping && (\r\n        <div style={{ padding: '0 16px 8px', color: '#2563eb', fontSize: 13, fontWeight: 500 }}>\r\n          Admin is typing\r\n          <span className=\"typing-dots\">\r\n            <span>.</span><span>.</span><span>.</span>\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}