{"ast":null,"code":"import React,{Suspense,lazy}from'react';import{Routes,Route,Navigate}from'react-router-dom';import{useAuth}from'./context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=/*#__PURE__*/lazy(()=>import('./pages/Login'));const Register=/*#__PURE__*/lazy(()=>import('./pages/Register'));const AdminDashboard=/*#__PURE__*/lazy(()=>import('./pages/AdminDashboard'));const ClientDashboard=/*#__PURE__*/lazy(()=>import('./pages/ClientDashboard'));const ReferralLanding=/*#__PURE__*/lazy(()=>import('./pages/ReferralLanding'));const NotFound=/*#__PURE__*/lazy(()=>import('./pages/NotFound'));function ProtectedRoute(_ref){let{children,role}=_ref;const{user,loading}=useAuth();if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:\"Loading...\"});if(!user)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});if(role&&user.role!==role)return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});return children;}export default function App(){return/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:\"Loading...\"}),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{role:\"admin\",children:/*#__PURE__*/_jsx(AdminDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{role:\"client\",children:/*#__PURE__*/_jsx(ClientDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/referral/:code\",element:/*#__PURE__*/_jsx(ReferralLanding,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]})});}","map":{"version":3,"names":["React","Suspense","lazy","Routes","Route","Navigate","useAuth","jsx","_jsx","jsxs","_jsxs","Login","Register","AdminDashboard","ClientDashboard","ReferralLanding","NotFound","ProtectedRoute","_ref","children","role","user","loading","className","to","replace","App","fallback","path","element"],"sources":["C:/Users/saije/Downloads/capital rise/client/src/App.js"],"sourcesContent":["import React, { Suspense, lazy } from 'react';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport { useAuth } from './context/AuthContext';\r\n\r\nconst Login = lazy(() => import('./pages/Login'));\r\nconst Register = lazy(() => import('./pages/Register'));\r\nconst AdminDashboard = lazy(() => import('./pages/AdminDashboard'));\r\nconst ClientDashboard = lazy(() => import('./pages/ClientDashboard'));\r\nconst ReferralLanding = lazy(() => import('./pages/ReferralLanding'));\r\nconst NotFound = lazy(() => import('./pages/NotFound'));\r\n\r\nfunction ProtectedRoute({ children, role }) {\r\n  const { user, loading } = useAuth();\r\n  if (loading) return <div className=\"flex items-center justify-center h-screen\">Loading...</div>;\r\n  if (!user) return <Navigate to=\"/login\" replace />;\r\n  if (role && user.role !== role) return <Navigate to=\"/\" replace />;\r\n  return children;\r\n}\r\n\r\nexport default function App() {\r\n  return (\r\n    <Suspense fallback={<div className=\"flex items-center justify-center h-screen\">Loading...</div>}>\r\n      <Routes>\r\n        <Route path=\"/login\" element={<Login />} />\r\n        <Route path=\"/register\" element={<Register />} />\r\n        <Route path=\"/admin\" element={<ProtectedRoute role=\"admin\"><AdminDashboard /></ProtectedRoute>} />\r\n        <Route path=\"/dashboard\" element={<ProtectedRoute role=\"client\"><ClientDashboard /></ProtectedRoute>} />\r\n        <Route path=\"/referral/:code\" element={<ReferralLanding />} />\r\n        <Route path=\"/\" element={<Navigate to=\"/login\" replace />} />\r\n        <Route path=\"*\" element={<NotFound />} />\r\n      </Routes>\r\n    </Suspense>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}